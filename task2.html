<!-- Full BookClub Website using HTML + CSS + JavaScript -->
<!-- Features Included:
1. Create/Join Book Clubs
2. Discussion Boards
3. Track Progress
4. Filter by Genre/Level
5. Responsive Layout
Optional Enhancements:
1. Notifications (Mock)
2. Rating System
3. Book Recommendations
4. Dark Mode Toggle
Challenges section included in comments
Deliverables: HTML, CSS, JS in single file
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BookClub</title>
<style>
body { font-family: Arial, sans-serif; margin: 0; background: #f2f2f2; transition: .3s; }
.dark-mode { background: #121212; color: white; }
header { background: #4b79ff; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
#clubList, #detailsBox, #createClubBox { background: white; margin: 20px; padding: 15px; border-radius: 10px; }
.dark-mode #clubList, .dark-mode #detailsBox, .dark-mode #createClubBox { background:#1d1d1d; }
.club { border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; border-radius: 8px; }
button { padding: 8px 14px; border-radius: 5px; border: none; cursor: pointer; background:#4b79ff; color:white; }
input, select, textarea { width: 100%; padding: 8px; margin-top: 5px; margin-bottom: 10px; border-radius: 5px; border:1px solid #aaa; }
#detailsBox, #createClubBox { display:none; }
</style>
</head>
<body>
<header>
<h2>ðŸ“š BookClub</h2>
<div>
<button onclick="toggleDark()">ðŸŒ™ Toggle Dark Mode</button>
<button onclick="showCreateClub()">+ Create Club</button>
</div>
</header>

<section id="filters" style="margin:20px; background:white; padding:15px; border-radius:10px;">
<h3>Filters</h3>
<label>Genre:</label>
<select id="filterGenre" onchange="renderClubs()"></select>
<label>Reading Level:</label>
<select id="filterLevel" onchange="renderClubs()"></select>
<label>Search:</label>
<input type="text" id="searchBox" onkeyup="renderClubs()" placeholder="Search clubs...">
</section>

<section id="clubList"></section>
<section id="detailsBox"></section>
<section id="createClubBox"></section>

<script>
let clubs = JSON.parse(localStorage.getItem('clubs') || '[]');
let dark = localStorage.getItem('darkMode') === 'true';
if(dark) document.body.classList.add('dark-mode');

function save() { localStorage.setItem('clubs', JSON.stringify(clubs)); }

function toggleDark(){
    dark = !dark;
    localStorage.setItem('darkMode', dark);
    document.body.classList.toggle('dark-mode');
}

function updateFilters(){
    let genres = ['All'];
    let levels = ['All'];
    clubs.forEach(c => { if(!genres.includes(c.genre)) genres.push(c.genre); if(!levels.includes(c.level)) levels.push(c.level); });
    document.getElementById('filterGenre').innerHTML = genres.map(g=>`<option>${g}</option>`).join('');
    document.getElementById('filterLevel').innerHTML = levels.map(l=>`<option>${l}</option>`).join('');
}

function renderClubs(){
    updateFilters();
    let g = document.getElementById('filterGenre').value;
    let l = document.getElementById('filterLevel').value;
    let q = document.getElementById('searchBox').value.toLowerCase();

    let list = clubs.filter(c => (g==='All'||c.genre===g) && (l==='All'||c.level===l) && c.name.toLowerCase().includes(q));

    document.getElementById('clubList').innerHTML = list.map(c => `
        <div class='club'>
            <h3>${c.name}</h3>
            <p>${c.genre} â€¢ ${c.level} â€¢ ${c.members} members</p>
            <p>${c.description}</p>
            <p><b>Progress:</b> ${c.progress}%</p>
            <button onclick='joinClub(${c.id})'>Join</button>
            <button onclick='viewClub(${c.id})'>View</button>
        </div>`).join('');
}

function showCreateClub(){
    document.getElementById('createClubBox').style.display='block';
    document.getElementById('createClubBox').innerHTML = `
        <h3>Create Book Club</h3>
        <input id='cname' placeholder='Club name'>
        <input id='cgenre' placeholder='Genre'>
        <input id='clevel' placeholder='Reading level'>
        <textarea id='cdesc' placeholder='Description'></textarea>
        <button onclick='createClub()'>Create</button>
        <button onclick="document.getElementById('createClubBox').style.display='none'">Cancel</button>`;
}

function createClub(){
    let c = {
        id: Date.now(),
        name: cname.value,
        genre: cgenre.value,
        level: clevel.value,
        description: cdesc.value,
        members: 1,
        progress: 0,
        rating: [],
        discussions: [],
        recommendations: []
    };
    clubs.push(c);
    save();
    renderClubs();
    document.getElementById('createClubBox').style.display='none';
}

function joinClub(id){
    let c = clubs.find(x=>x.id===id);
    c.members++;
    save();
    renderClubs();
}

function viewClub(id){
    let c = clubs.find(x=>x.id===id);
    document.getElementById('detailsBox').style.display='block';
    document.getElementById('detailsBox').innerHTML = `
        <h2>${c.name}</h2>
        <p>${c.genre} â€¢ ${c.level}</p>
        <p>${c.description}</p>
        <h3>Progress</h3>
        <input type='number' value='${c.progress}' onchange='updateProgress(${id},this.value)'>
        <h3>Discussions</h3>
        <div id='discussionBox'>${c.discussions.map(d=>`<p><b>${d.author}:</b> ${d.text}</p>`).join('')}</div>
        <input id='msgBox' placeholder='Write message...'>
        <button onclick='addMessage(${id})'>Post</button>
        <h3>Rate this Book</h3>
        <select onchange='addRating(${id},this.value)'>
            <option>Rate</option>
            <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
        </select>
        <h3>Book Recommendations</h3>
        <input id='recBox' placeholder='Recommend a book'>
        <button onclick='addRecommendation(${id})'>Add</button>
        <div>${c.recommendations.map(r=>`<p>ðŸ“˜ ${r}</p>`).join('')}</div>
        <button onclick="document.getElementById('detailsBox').style.display='none'">Close</button>
    `;
}

function addMessage(id){
    let c = clubs.find(x=>x.id===id);
    c.discussions.push({ author: 'You', text: msgBox.value });
    msgBox.value='';
    save();
    viewClub(id);
}

function updateProgress(id,val){
    let c = clubs.find(x=>x.id===id);
    c.progress = Math.min(100, Math.max(0, Number(val)));
    save();
    viewClub(id);
}

function addRating(id,val){
    if(val==='Rate') return;
    let c = clubs.find(x=>x.id===id);
    c.rating.push(Number(val));